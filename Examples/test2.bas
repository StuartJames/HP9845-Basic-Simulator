10  ! THIS PROGRAM SHOWS HOW THE PDIR STATEMENT CAN BE USED TO ROTATE
20  ! A SET OF FIXED POINTS. IN THIS CASE THE HANDS OF A CLOCK.
30  !
30   OPTION BASE 1
40   INTEGER B8,K8,B,K6,K7,S1,S2,S8,S9,A8,F8,Z4,C7,Q4
50   INTEGER M(120),V(7),B(6),P(24),G(77),A(125),E(78),H(78),Old(120),Change(64)
60   INTEGER N(78),Y(78),T(78),Value(13),Book(7,6)
70   SHORT L(6,3),W(78),S(78),O(78),D(78),X(78)
80   DIM X$[8],F$[16],A$[8],H$[8]
90   COM Piece$(12)[120],Erase$[120],L6
100  X$="12345678"
110  A$="-PNBRQK "
120  B$="-PNBRQKpnbrqk"
130  ASSIGN #1 TO "PIECE$", FileRet
140  ASSIGN #2 TO "CHSGME"
150  READ #1;Piece$(*),Erase$
160  RESTORE 
170  MAT READ M,V,B,P!,G,Value,Book    ! SET UP STARTING BOARD
240  K8=Z4=0
250  A5=1
260  A9=-L6
270  MAT L=(0)
280  MAT X=(0)
290  MAT A=(0)
300  M(26)=5  ! SET UP KINGS & QUEENS
320  M(25)=6
330  M(96)=-5
340  M(95)=-6
350  H(35)=-1
360 !   STARTING BOARD POSITIONS
440	 X=0
450	 y=0
460   MAT Old=M
470	 PEN 1
480	 PLOTTER IS 13,"GRAPHICS"
490	 GCLEAR
500  SCALE -20,180,0,160
510	 GRAPHICS
520	 CLIP 0,160,0,160
530	 GRID 20,20,0,0
540	 !FOR Ip=2 TO 9
550	 !  FOR Jp=2 TO 9
560	 !    K=10*Ip+Jp
570	 !    CALL Decode(K,X,Y)
580	 !    PLOT X,Y,-2
590	 !    RPLOT -4,14,-2
570	 !    LORG 7
580	 !    PEN 1
590	 !    LABEL USING "DD";K
600	 !  NEXT Jp
610	 !NEXT Ip
620 FRAME
630 REM Loop
640 GOTO 630
870 DATA 7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,2,3,5,6,3,2,4
880 DATA 7,7,1,1,1,1,1,1,1,1,7,7,0,0,0,0,0,0,0,0,7,7,0,0,0,0,0,0,0,0
890 DATA 7,7,0,0,0,0,0,0,0,0,7,7,0,0,0,0,0,0,0,0,7,7
800 DATA -1,-1,-1,-1,-1,-1,-1,-1,7,7,-4,-2,-3,-5,-6,-3,-2,-4
810 DATA 7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,0,1,3,3,5,9,12
820 DATA 12,15,10,1,6,6
830 DATA 1,-1,10,-10,0,1,4,-1,10,-10,-9,-11,9,11,0,8,-8,12,-12,19,-19,21,-21,0
840 DATA 1,1,1,1,1,1,1,8,9,10,11,12,0,0,0,0,0,9,19,10
850 DATA 21,11,0,0,0,0,9,0,0,10,0,0,11,0,0,9,0,0,0,10
860 DATA 0,0,0,11,9,0,0,0,0,10,0,0,0,9,11,0,0,0,0,10
870 DATA 0,0,9,0,0,11,0,0,0,10,0,0,0,0,0,0,11
880 DATA 0,1,2,3,4,5,6,-1,-2,-3,-4,-5,-6 ! VALUE FOR MANUAL BOARD INPUT
890 DATA 3656,8666,9374,8575,9879,8777   ! BOOK OPENING TABLE
900 DATA 3555,8565,8676,9877,8474,8373
910 DATA 3545,8575,9877,9879,93,74,9568
920 DATA 2847,9577,9559,9562,0,0
930 DATA 2849,9764,0,0,0,0
940 DATA 3646,8666,9374,8464,0,0
950 DATA 3848,8676,9877,8878,8373,9467
960 END
